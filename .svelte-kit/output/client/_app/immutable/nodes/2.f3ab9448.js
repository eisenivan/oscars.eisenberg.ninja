import{S as ee,i as te,s as le,a as M,J as V,m as se,f as v,g as A,h as O,z as j,D as ae,y as q,l as oe,q as ne,E as re,e as y,v as K,c as E,b as N,w as Q,o as k,x as W,j as b,u as X,r as Z,A as x,n as ie,t as w,d as S,k as B,p as ce}from"../chunks/index.e3f5fe78.js";import{as as fe,at as R,au as D,av as ue,aw as _e,ax as H,ay as de}from"../chunks/navigation.54cc5851.js";import{k as he,i as T}from"../chunks/helpers.d40725a1.js";import{Y as L}from"../chunks/constants.d3c68800.js";import{L as pe}from"../chunks/Loader.839f4639.js";import{P as me}from"../chunks/PageHeading.b0991ad5.js";function ge({url:f}){return{url:f.pathname}}const Me=Object.freeze(Object.defineProperty({__proto__:null,load:ge},Symbol.toStringTag,{value:"Module"}));function Y(f,t,l){const e=f.slice();e[9]=t[l];const s=e[1].find(function(...c){return f[7](e[9],...c)});e[10]=s;const a=e[0].indexOf(e[10])>-1;e[11]=a;const m=e[3]&&e[1].length>0&&e[10]&&e[11]?"text-green-600":e[3]&&e[1].length>0&&e[10]&&!e[11]?"text-red-600":"";e[12]=m;const n=e[3]&&e[1].length>0&&e[10]&&e[11]?"✓":e[3]&&e[1].length>0&&e[10]&&!e[11]?"✕":"";return e[13]=n,e}function C(f,t,l){const e=f.slice();e[16]=t[l];const s=`${e[9].id}__${he(e[16].text)}`;return e[17]=s,e}function be(f){let t,l,e,s,a=[],m=new Map,n;l=new me({props:{$$slots:{default:[ke]},$$scope:{ctx:f}}});let _=f[2];const c=o=>o[9].id;for(let o=0;o<_.length;o+=1){let u=Y(f,_,o),i=c(u);m.set(i,a[o]=G(i,u))}return{c(){t=y("div"),K(l.$$.fragment),e=M(),s=y("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){t=E(o,"DIV",{});var u=N(t);Q(l.$$.fragment,u),e=A(u),s=E(u,"DIV",{class:!0});var i=N(s);for(let p=0;p<a.length;p+=1)a[p].l(i);i.forEach(v),u.forEach(v),this.h()},h(){k(s,"class","mt-8 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 border-blue-700 border-8 rounded-sm border-opacity-10 shadow-sm p-4 bg-blue-100")},m(o,u){O(o,t,u),W(l,t,null),b(t,e),b(t,s);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(s,null);n=!0},p(o,u){const i={};u&1048618&&(i.$$scope={dirty:u,ctx:o}),l.$set(i),u&79&&(_=o[2],a=X(a,u,c,1,o,_,m,s,Z,G,null,Y))},i(o){n||(q(l.$$.fragment,o),n=!0)},o(o){j(l.$$.fragment,o),n=!1},d(o){o&&v(t),x(l);for(let u=0;u<a.length;u+=1)a[u].d()}}}function ve(f){let t,l;return t=new pe({}),{c(){K(t.$$.fragment)},l(e){Q(t.$$.fragment,e)},m(e,s){W(t,e,s),l=!0},p:ie,i(e){l||(q(t.$$.fragment,e),l=!0)},o(e){j(t.$$.fragment,e),l=!1},d(e){x(t,e)}}}function F(f){let t,l,e,s,a=f[1].length+"",m;return{c(){t=y("span"),l=w("Score: "),e=w(f[5]),s=w("/"),m=w(a),this.h()},l(n){t=E(n,"SPAN",{class:!0});var _=N(t);l=S(_,"Score: "),e=S(_,f[5]),s=S(_,"/"),m=S(_,a),_.forEach(v),this.h()},h(){k(t,"class","ml-2 text-sm")},m(n,_){O(n,t,_),b(t,l),b(t,e),b(t,s),b(t,m)},p(n,_){_&32&&B(e,n[5]),_&2&&a!==(a=n[1].length+"")&&B(m,a)},d(n){n&&v(t)}}}function ke(f){let t,l,e=f[3]&&f[1].length>0&&F(f);return{c(){t=w(`My Ballot
			`),e&&e.c(),l=V()},l(s){t=S(s,`My Ballot
			`),e&&e.l(s),l=V()},m(s,a){O(s,t,a),e&&e.m(s,a),O(s,l,a)},p(s,a){s[3]&&s[1].length>0?e?e.p(s,a):(e=F(s),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},d(s){s&&v(t),e&&e.d(s),s&&v(l)}}}function J(f){let t,l=f[16].subtext+"",e;return{c(){t=y("span"),e=w(l),this.h()},l(s){t=E(s,"SPAN",{class:!0});var a=N(t);e=S(a,l),a.forEach(v),this.h()},h(){k(t,"class","block ml-6 pb-2 font-light text-xs italic")},m(s,a){O(s,t,a),b(t,e)},p(s,a){a&4&&l!==(l=s[16].subtext+"")&&B(e,l)},d(s){s&&v(t)}}}function U(f,t){let l,e,s,a,m,n,_,c,o=t[16].text+"",u,i,p,g,$,P,r=t[16].subtext&&J(t);return{key:f,first:null,c(){l=y("label"),e=y("input"),_=M(),c=y("span"),u=w(o),i=M(),r&&r.c(),this.h()},l(h){l=E(h,"LABEL",{class:!0,for:!0});var d=N(l);e=E(d,"INPUT",{class:!0,type:!0,name:!0,id:!0}),_=A(d),c=E(d,"SPAN",{class:!0});var I=N(c);u=S(I,o),I.forEach(v),i=A(d),r&&r.l(d),d.forEach(v),this.h()},h(){e.disabled=t[3],e.checked=s=T(t[0],t[17]),k(e,"class","mr-2"),k(e,"type","radio"),k(e,"name",a=t[9].id),e.value=m=t[17],k(e,"id",n=t[17]),k(c,"class","uppercase"),k(l,"class",p=`border-solid block pl-2 ml-2 border-l border-indigo-200 ${t[1].indexOf(t[17])>-1?t[12]:""}`),k(l,"for",g=t[17]),this.first=l},m(h,d){O(h,l,d),b(l,e),b(l,_),b(l,c),b(c,u),b(l,i),r&&r.m(l,null),$||(P=ce(e,"change",t[6]),$=!0)},p(h,d){t=h,d&8&&(e.disabled=t[3]),d&5&&s!==(s=T(t[0],t[17]))&&(e.checked=s),d&4&&a!==(a=t[9].id)&&k(e,"name",a),d&4&&m!==(m=t[17])&&(e.value=m),d&4&&n!==(n=t[17])&&k(e,"id",n),d&4&&o!==(o=t[16].text+"")&&B(u,o),t[16].subtext?r?r.p(t,d):(r=J(t),r.c(),r.m(l,null)):r&&(r.d(1),r=null),d&15&&p!==(p=`border-solid block pl-2 ml-2 border-l border-indigo-200 ${t[1].indexOf(t[17])>-1?t[12]:""}`)&&k(l,"class",p),d&4&&g!==(g=t[17])&&k(l,"for",g)},d(h){h&&v(l),r&&r.d(),$=!1,P()}}}function G(f,t){let l,e,s=t[9].name+"",a,m,n,_=t[13]+"",c,o,u,i=[],p=new Map,g,$=t[9].candidates;const P=r=>r[16].text;for(let r=0;r<$.length;r+=1){let h=C(t,$,r),d=P(h);p.set(d,i[r]=U(d,h))}return{key:f,first:null,c(){l=y("div"),e=y("h2"),a=w(s),m=M(),n=y("i"),c=w(_),u=M();for(let r=0;r<i.length;r+=1)i[r].c();g=M(),this.h()},l(r){l=E(r,"DIV",{class:!0});var h=N(l);e=E(h,"H2",{class:!0});var d=N(e);a=S(d,s),m=A(d),n=E(d,"I",{class:!0});var I=N(n);c=S(I,_),I.forEach(v),d.forEach(v),u=A(h);for(let z=0;z<i.length;z+=1)i[z].l(h);g=A(h),h.forEach(v),this.h()},h(){k(n,"class",o=t[12]),k(e,"class","text-md font-semibold mb-2 uppercase"),k(l,"class","mb-6"),this.first=l},m(r,h){O(r,l,h),b(l,e),b(e,a),b(e,m),b(e,n),b(n,c),b(l,u);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(l,null);b(l,g)},p(r,h){t=r,h&4&&s!==(s=t[9].name+"")&&B(a,s),h&15&&_!==(_=t[13]+"")&&B(c,_),h&15&&o!==(o=t[12])&&k(n,"class",o),h&79&&($=t[9].candidates,i=X(i,h,P,1,t,$,p,l,Z,U,g,C))},d(r){r&&v(l);for(let h=0;h<i.length;h+=1)i[h].d()}}}function $e(f){let t,l,e,s,a;const m=[ve,be],n=[];function _(c,o){return c[4]?0:1}return l=_(f),e=n[l]=m[l](f),{c(){t=M(),e.c(),s=V(),this.h()},l(c){se("svelte-1pmvvdc",document.head).forEach(v),t=A(c),e.l(c),s=V(),this.h()},h(){document.title="My Ballot"},m(c,o){O(c,t,o),n[l].m(c,o),O(c,s,o),a=!0},p(c,[o]){let u=l;l=_(c),l===u?n[l].p(c,o):(re(),j(n[u],1,1,()=>{n[u]=null}),ae(),e=n[l],e?e.p(c,o):(e=n[l]=m[l](c),e.c()),q(e,1),e.m(s.parentNode,s))},i(c){a||(q(e),a=!0)},o(c){j(e),a=!1},d(c){c&&v(t),n[l].d(c),c&&v(s)}}}function ye(f,t,l){let e;oe(f,_e,i=>l(8,e=i));let s=[],a=[],m=!1,n=[],_=!0;ne(async()=>{if(!e){await fe("/login");return}try{const p=R(D,`/groups/${L}`),g=await H(p);l(2,s=g.val()||[]),l(4,_=!1)}catch(p){console.error("Error loading categories:",p)}const i=R(D,`/settings/${L}`);de(i,p=>{const g=p.val();g&&(l(3,m=g.locked||!1),l(1,n=g.results||[]))});try{const p=R(D,`/ballots/${L}/${e.uid}/votes`),g=await H(p);l(0,a=g.val()||[])}catch(p){console.error("Error loading ballot:",p)}});const c=async i=>{const p=i.target.value,g=[...a],$=p.split("__")[0],P=g.findIndex(r=>r.indexOf($)>-1);P===-1?g.push(p):g[P]=p;try{const r=R(D,`ballots/${L}/${e.uid}`);await ue(r,{displayName:e.displayName,votes:g}),l(0,a=g)}catch(r){console.error("Error updating ballot:",r)}};let o=0;const u=(i,p)=>p.indexOf(i.id)>-1;return f.$$.update=()=>{f.$$.dirty&35&&a.length>0&&n.length>0&&(l(5,o=0),n.forEach(i=>{a.indexOf(i)>-1&&l(5,o+=1)}))},[a,n,s,m,_,o,c,u]}class Ae extends ee{constructor(t){super(),te(this,t,ye,$e,le,{})}}export{Ae as component,Me as universal};
