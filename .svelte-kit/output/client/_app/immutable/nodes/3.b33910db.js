import{S as Q,i as W,s as X,a as w,e as E,q as C,E as Y,g as b,h as A,b as S,d as I,r as M,j as p,k as N,l as v,v as J,I as x,C as T,G as Z,x as j,J as K}from"../chunks/index.d983bbc4.js";import"../chunks/paths.1b830c06.js";import{av as R,aw as L,ax as $,ay as ee,az as q}from"../chunks/auth.4dcf20aa.js";import{k as te,i as z}from"../chunks/helpers.d40725a1.js";async function le({params:m}){return{id:m.id}}const ce=Object.freeze(Object.defineProperty({__proto__:null,load:le},Symbol.toStringTag,{value:"Module"}));function B(m,t,e){const l=m.slice();return l[7]=t[e],l}function U(m,t,e){const l=m.slice();l[10]=t[e];const o=`${l[7].id}__${te(l[10].text)}`;return l[11]=o,l}function F(m){let t,e=m[10].subtext+"",l;return{c(){t=E("span"),l=C(e),this.h()},l(o){t=S(o,"SPAN",{class:!0});var u=I(t);l=M(u,e),u.forEach(b),this.h()},h(){p(t,"class","block ml-6 pb-2 font-thin text-xs italic")},m(o,u){N(o,t,u),v(t,l)},p(o,u){u&2&&e!==(e=o[10].subtext+"")&&j(l,e)},d(o){o&&b(t)}}}function G(m,t){let e,l,o,u,g,c,y,_,n=t[10].text+"",d,s,i,f,k,a=t[10].subtext&&F(t);return{key:m,first:null,c(){e=E("label"),l=E("input"),y=w(),_=E("span"),d=C(n),s=w(),a&&a.c(),this.h()},l(h){e=S(h,"LABEL",{class:!0,for:!0});var r=I(e);l=S(r,"INPUT",{class:!0,type:!0,name:!0,id:!0}),y=A(r),_=S(r,"SPAN",{class:!0});var P=I(_);d=M(P,n),P.forEach(b),s=A(r),a&&a.l(r),r.forEach(b),this.h()},h(){l.checked=o=z(t[2],t[11]),p(l,"class","mr-2"),p(l,"type","radio"),p(l,"name",u=t[7].id),l.value=g=t[11],p(l,"id",c=t[11]),p(_,"class",""),p(e,"class","border-solid block pl-2 ml-2 border-l"),p(e,"for",i=t[11]),this.first=e},m(h,r){N(h,e,r),v(e,l),v(e,y),v(e,_),v(_,d),v(e,s),a&&a.m(e,null),f||(k=J(l,"change",t[4]),f=!0)},p(h,r){t=h,r&6&&o!==(o=z(t[2],t[11]))&&(l.checked=o),r&2&&u!==(u=t[7].id)&&p(l,"name",u),r&2&&g!==(g=t[11])&&(l.value=g),r&2&&c!==(c=t[11])&&p(l,"id",c),r&2&&n!==(n=t[10].text+"")&&j(d,n),t[10].subtext?a?a.p(t,r):(a=F(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null),r&2&&i!==(i=t[11])&&p(e,"for",i)},d(h){h&&b(e),a&&a.d(),f=!1,k()}}}function H(m,t){let e,l,o=t[7].name+"",u,g,c=[],y=new Map,_,n=t[7].candidates;const d=s=>s[10].text;for(let s=0;s<n.length;s+=1){let i=U(t,n,s),f=d(i);y.set(f,c[s]=G(f,i))}return{key:m,first:null,c(){e=E("div"),l=E("h2"),u=C(o),g=w();for(let s=0;s<c.length;s+=1)c[s].c();_=w(),this.h()},l(s){e=S(s,"DIV",{class:!0});var i=I(e);l=S(i,"H2",{class:!0});var f=I(l);u=M(f,o),f.forEach(b),g=A(i);for(let k=0;k<c.length;k+=1)c[k].l(i);_=A(i),i.forEach(b),this.h()},h(){p(l,"class","text-xl lg:text-2xl mb-2"),p(e,"class","mb-6"),this.first=e},m(s,i){N(s,e,i),v(e,l),v(l,u),v(e,g);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(e,null);v(e,_)},p(s,i){t=s,i&2&&o!==(o=t[7].name+"")&&j(u,o),i&22&&(n=t[7].candidates,c=x(c,i,d,1,t,n,y,e,K,G,_,U))},d(s){s&&b(e);for(let i=0;i<c.length;i+=1)c[i].d()}}}function se(m){let t,e,l,o,u,g,c,y,_,n=[],d=new Map,s,i,f=m[1];const k=a=>a[7].id;for(let a=0;a<f.length;a+=1){let h=B(m,f,a),r=k(h);d.set(r,n[a]=H(r,h))}return{c(){t=w(),e=E("div"),l=E("label"),o=E("input"),u=w(),g=E("span"),c=C("Close voting"),y=w(),_=E("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){Y("svelte-13s6o7t",document.head).forEach(b),t=A(a),e=S(a,"DIV",{});var r=I(e);l=S(r,"LABEL",{class:!0,for:!0});var P=I(l);o=S(P,"INPUT",{class:!0,type:!0,id:!0}),u=A(P),g=S(P,"SPAN",{class:!0});var D=I(g);c=M(D,"Close voting"),D.forEach(b),P.forEach(b),y=A(r),_=S(r,"DIV",{class:!0});var O=I(_);for(let V=0;V<n.length;V+=1)n[V].l(O);O.forEach(b),r.forEach(b),this.h()},h(){document.title="Admin",p(o,"class","mr-2"),p(o,"type","checkbox"),o.checked=m[0],p(o,"id","locked"),p(g,"class",""),p(l,"class","border-solid block pl-2 mb-6"),p(l,"for","locked"),p(_,"class","grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3")},m(a,h){N(a,t,h),N(a,e,h),v(e,l),v(l,o),v(l,u),v(l,g),v(g,c),v(e,y),v(e,_);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(_,null);s||(i=J(o,"change",m[3]),s=!0)},p(a,[h]){h&1&&(o.checked=a[0]),h&22&&(f=a[1],n=x(n,h,k,1,a,f,d,_,K,H,null,B))},i:T,o:T,d(a){a&&b(t),a&&b(e);for(let h=0;h<n.length;h+=1)n[h].d();s=!1,i()}}}function ae(m,t,e){let{data:l}=t,o=l.id,u=!0,g=[],c=[];Z(async()=>{try{const d=R(L,`/groups/${o}`),s=await $(d);e(1,g=s.val()||[])}catch(d){console.error("Error loading categories:",d)}const n=R(L,`/settings/${o}`);ee(n,d=>{const s=d.val();s&&(e(0,u=s.locked||!1),e(2,c=s.results||[]))})});const y=async n=>{const d=n.target.checked;try{const s=R(L,`settings/${o}/locked`);await q(s,!!d),e(0,u=d)}catch(s){console.error("Error updating locked status:",s)}},_=async n=>{const d=n.target.value,s=[...c],i=d.split("__")[0],f=s.findIndex(k=>k.indexOf(i)>-1);f===-1?s.push(d):s[f]=d;try{const k=R(L,`settings/${o}/results`);await q(k,s),e(2,c=s)}catch(k){console.error("Error updating results:",k)}};return m.$$set=n=>{"data"in n&&e(5,l=n.data)},[u,g,c,y,_,l]}class ue extends Q{constructor(t){super(),W(this,t,ae,se,X,{data:5})}}export{ue as component,ce as universal};
